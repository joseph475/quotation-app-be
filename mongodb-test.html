<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB Connection Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1 {
            color: #333;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .instructions {
            background-color: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin-bottom: 20px;
        }
        .code {
            background-color: #f1f1f1;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            overflow-x: auto;
        }
        .step {
            margin-bottom: 30px;
        }
        .note {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>MongoDB Connection Test</h1>
    
    <div class="instructions">
        <p>This page provides instructions for testing your MongoDB connection for the Quotation App backend.</p>
    </div>
    
    <div class="step">
        <h2>Step 1: Verify Docker is Running</h2>
        <p>Make sure Docker is running on your system. You can check this by running:</p>
        <div class="code">docker ps</div>
        <p>You should see a list of running containers. If you don't see any MongoDB container, run:</p>
        <div class="code">docker run --name mongodb -d -p 27017:27017 --restart always mongo</div>
    </div>
    
    <div class="step">
        <h2>Step 2: Check MongoDB Connection</h2>
        <p>Run the detailed MongoDB test script:</p>
        <div class="code">node detailed-mongodb-test.js</div>
        <p>This script will attempt to connect to MongoDB and provide detailed error information if it fails.</p>
    </div>
    
    <div class="step">
        <h2>Step 3: Verify Environment Configuration</h2>
        <p>Make sure your .env file has the correct MongoDB connection string:</p>
        <div class="code">MONGODB_URI=mongodb://localhost:27017/quotation-app</div>
        <p>This is the default connection string for a local MongoDB instance running on port 27017.</p>
    </div>
    
    <div class="step">
        <h2>Step 4: Start the Application</h2>
        <p>Once MongoDB is running and the connection is verified, start the application:</p>
        <div class="code">npm run dev</div>
        <p>Or use the safe start script that checks the MongoDB connection first:</p>
        <div class="code">npm run start-safe</div>
    </div>
    
    <div class="note">
        <h3>Troubleshooting Tips</h3>
        <ul>
            <li>If you're using Docker, make sure port 27017 is properly exposed and not being used by another service.</li>
            <li>Check Docker logs for any errors: <code>docker logs mongodb</code></li>
            <li>Try restarting the MongoDB container: <code>docker restart mongodb</code></li>
            <li>If all else fails, try removing the container and creating a new one:
                <div class="code">docker rm -f mongodb<br>docker run --name mongodb -d -p 27017:27017 --restart always mongo</div>
            </li>
        </ul>
    </div>
</body>
</html>
